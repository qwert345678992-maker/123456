-----------------------------------------------------------
-- ä¼Šå°”å¾·è„šæœ¬éªŒè¯æ ¸å¿ƒé€»è¾‘ï¼ˆLocalScriptï¼Œé€‚é…å¤šæ³¨å…¥å™¨ï¼‰
-- éªŒè¯æ ‡è®°ï¼šæ³¨å…¥å™¨æŒä¹…åŒ–ç›®å½•ä¸‹çš„"åŒæ„ä¼Šå°”å¾·è„šæœ¬"æ–‡ä»¶å¤¹
-----------------------------------------------------------
-- ================ åŸºç¡€æœåŠ¡ä¸å˜é‡ ================
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer or Players.PlayerAdded:Wait()
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local RunService = game:GetService("RunService")
local Color3 = Color3
local UDim2 = UDim2
local Instance = Instance
local task = task
local Enum = Enum
-- æ³¨å…¥å™¨æ–‡ä»¶æ“ä½œå…¼å®¹ï¼ˆæ ¸å¿ƒï¼šè·å–æŒä¹…åŒ–è·¯å¾„ï¼‰
local readFunc, writeFunc, getPathFunc
pcall(function()
    -- é€‚é…å¿è€…/Delta/Synapseç­‰æ³¨å…¥å™¨
    if type(syn) == "table" then
        readFunc = syn.readfile or readfile
        writeFunc = syn.writefile or writefile
        getPathFunc = syn.datapath  -- å¿è€…æ³¨å…¥å™¨è·å–æ²™ç›’è·¯å¾„
    else
        -- å…¶ä»–æ³¨å…¥å™¨å…¼å®¹
        readFunc = readfile or readFile
        writeFunc = writefile or writeFile
        -- å°è¯•è·å–é»˜è®¤è·¯å¾„ï¼ˆå¦‚Krnlç­‰ï¼‰
        getPathFunc = function() return "Roblox/Scripts" end
    end
end)
-- ================ éªŒè¯æ–‡ä»¶å¤¹æ ¸å¿ƒé€»è¾‘ ================
-- è·å–æŒä¹…åŒ–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆè·¨æ³¨å…¥å™¨å…¼å®¹ï¼‰
local function getVerifyFolderPath()
    local basePath
    if getPathFunc then
        -- ä¼˜å…ˆä½¿ç”¨æ³¨å…¥å™¨æä¾›çš„æ²™ç›’è·¯å¾„ï¼ˆå¦‚å¿è€…çš„syn.datapath()ï¼‰
        basePath = getPathFunc()
    else
        --  fallbackè·¯å¾„ï¼ˆé€‚é…å¤šæ•°PCæ³¨å…¥å™¨ï¼‰
        basePath = "C:/RobloxScripts"  -- å¯æ ¹æ®ç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´
        pcall(function()
            -- å°è¯•æ£€æµ‹ç³»ç»Ÿç±»å‹ï¼ˆWindows/macOSï¼‰
            if game:GetService("RunService"):IsStudio() then
                basePath = "Roblox/Scripts"  -- Studioç¯å¢ƒ
            elseif string.find(game:GetService("MarketplaceService"):GetProductInfo(1).Name, "Mac") then
                basePath = "~/Library/Roblox/Scripts"  -- macOSè·¯å¾„
            end
        end)
    end
    -- æ‹¼æ¥å®Œæ•´æ–‡ä»¶å¤¹è·¯å¾„
    return basePath .. "/åŒæ„ç§‹å®¹è„šæœ¬"
end
-- æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼ˆè·¨æ³¨å…¥å™¨å…¼å®¹ï¼‰
local function folderExists()
    if not readFunc then return false end  -- æ— æ–‡ä»¶æ“ä½œèƒ½åŠ›åˆ™å¼ºåˆ¶éªŒè¯
    local folderPath = getVerifyFolderPath()
    -- å°è¯•è¯»å–æ–‡ä»¶å¤¹ï¼ˆæ³¨å…¥å™¨é€šå¸¸é€šè¿‡æ£€æŸ¥è·¯å¾„æ˜¯å¦å¯è®¿é—®åˆ¤æ–­å­˜åœ¨æ€§ï¼‰
    local success = pcall(function()
        -- ä¸åŒæ³¨å…¥å™¨åˆ¤æ–­æ–¹å¼å¯èƒ½ä¸åŒï¼Œè¿™é‡Œç”¨"å°è¯•è¯»å–"ä½œä¸ºå­˜åœ¨æ€§æ£€æµ‹
        readFunc(folderPath .. "/.verify")  -- è¯»å–æ–‡ä»¶å¤¹å†…çš„æ ‡è®°æ–‡ä»¶
    end)
    return success
end
-- åˆ›å»ºéªŒè¯æ–‡ä»¶å¤¹ï¼ˆè·¨æ³¨å…¥å™¨å…¼å®¹ï¼‰
local function createTargetFolder()
    if not writeFunc then return end  -- æ— å†™å…¥èƒ½åŠ›åˆ™è·³è¿‡ï¼ˆä¸å½±å“ä½¿ç”¨ï¼Œä»…ä¸‹æ¬¡ä»éœ€éªŒè¯ï¼‰
    local folderPath = getVerifyFolderPath()
    local success = pcall(function()
        -- 1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆæ³¨å…¥å™¨é€šå¸¸æ”¯æŒé€šè¿‡å†™å…¥ç©ºæ–‡ä»¶åˆ›å»ºæ–‡ä»¶å¤¹ï¼‰
        writeFunc(folderPath .. "/.verify", "")  -- å†™å…¥ç©ºæ ‡è®°æ–‡ä»¶ï¼Œè‡ªåŠ¨åˆ›å»ºçˆ¶æ–‡ä»¶å¤¹
        print("éªŒè¯æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸï¼š" .. folderPath)
    end)
    if not success then
        -- é™çº§æ–¹æ¡ˆï¼šè‹¥æ— æ³•åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œä¸´æ—¶ç”¨PlayerGuiæ–‡ä»¶å¤¹ï¼ˆä»…å½“å‰ä¼šè¯æœ‰æ•ˆï¼‰
        local tempFolder = Instance.new("Folder")
        tempFolder.Name = "åŒæ„ç§‹å®¹è„šæœ¬"
        tempFolder.Parent = PlayerGui
        print("è­¦å‘Šï¼šæŒä¹…åŒ–æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥ï¼Œä½¿ç”¨ä¸´æ—¶æ–‡ä»¶å¤¹ï¼ˆä»…å½“å‰ä¼šè¯æœ‰æ•ˆï¼‰")
    end
end
-- ================ é€šç”¨UIå·¥å…·å‡½æ•° ================
-- åˆ›å»ºå±å¹•GUI
local function createScreenGui(name)
    local gui = Instance.new("ScreenGui")
    gui.Name = name
    gui.IgnoreGuiInset = true
    gui.Parent = PlayerGui
    return gui
end
-- åˆ›å»ºå¸¦åœ†è§’çš„æ¡†æ¶
local function createFrame(parent, size, position)
    local frame = Instance.new("Frame")
    frame.Size = size
    frame.Position = position
    frame.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
    frame.BackgroundTransparency = 0.3
    frame.BorderSizePixel = 1
    frame.BorderColor3 = Color3.fromRGB(180, 160, 255)
    frame.Parent = parent
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = frame
    return frame
end
-- åˆ›å»ºåŸºç¡€æ ‡ç­¾
local function createBasicLabel(parent, text, size, position)
    local label = Instance.new("TextLabel")
    label.Text = text
    label.Size = size
    label.Position = position
    label.TextColor3 = Color3.new(1, 1, 1)
    label.TextSize = 16
    label.BackgroundTransparency = 1
    label.Parent = parent
    return label
end
-- åˆ›å»ºæ™®é€šæ ‡ç­¾
local function createLabel(parent, text, size, position)
    local label = Instance.new("TextLabel")
    label.Text = text
    label.Size = size
    label.Position = position
    label.TextColor3 = Color3.new(1, 1, 1)
    label.TextSize = 16
    label.BackgroundTransparency = 1
    label.Parent = parent
    return label
end
-- åˆ›å»ºæŒ‰é’®
local function createButton(parent, text, size, position, callback)
    local btn = Instance.new("TextButton")
    btn.Text = text
    btn.Size = size
    btn.Position = position
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 100)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextSize = 14
    btn.Parent = parent
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn
    if callback then
        btn.MouseButton1Click:Connect(callback)
    end
    return btn
end
-- åˆ›å»ºç‚¹å‡»è¾“å…¥æ¡†
local function createClickToInput(parent, size, position, triggerText, placeholderText)
    local trigger = Instance.new("TextButton")
    trigger.Size = size
    trigger.Position = position
    trigger.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    trigger.BackgroundTransparency = 0.7
    trigger.Text = triggerText
    trigger.TextColor3 = Color3.new(1, 1, 1)
    trigger.TextSize = 14
    trigger.Parent = parent
    local cornerTrigger = Instance.new("UICorner")
    cornerTrigger.CornerRadius = UDim.new(0, 6)
    cornerTrigger.Parent = trigger
    local box = Instance.new("TextBox")
    box.Size = size
    box.Position = position
    box.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    box.BackgroundTransparency = 0.7
    box.TextColor3 = Color3.new(1, 1, 1)
    box.TextSize = 14
    box.PlaceholderText = placeholderText
    box.Visible = false
    box.Parent = parent
    local cornerBox = Instance.new("UICorner")
    cornerBox.CornerRadius = UDim.new(0, 6)
    cornerBox.Parent = box
    trigger.MouseButton1Click:Connect(function()
        trigger.Visible = false
        box.Visible = true
        box:CaptureFocus()
    end)
    return trigger, box
end
-- æ’­æ”¾ä¸´æ—¶éŸ³æ•ˆ
local function playTempSound(soundId)
    local fullSoundId = "rbxassetid://" .. tostring(soundId)
    local sound = Instance.new("Sound")
    sound.SoundId = fullSoundId
    sound.Volume = 1.0
    sound.Parent = workspace
    pcall(function()
        sound:Play()
        sound.Ended:Connect(function() sound:Destroy() end)
        task.delay(5, function() if sound.Parent then sound:Destroy() end end)
    end)
end
-- ================ å…¬å‘Šå¼¹çª—ï¼ˆæ·»åŠ æ»šåŠ¨åŠŸèƒ½ï¼‰ ================
local function showAnnouncement()
    local noticeGui = createScreenGui("Popup_Announcement")
    local noticeFrame = createFrame(noticeGui, UDim2.new(0, 400, 0, 300), UDim2.new(0.5, -200, 0.5, -150))
    
    -- æ ‡é¢˜ï¼ˆç¼©å°50%ï¼šåŸ22 â†’ 11ï¼‰
    local titleLabel = createBasicLabel(noticeFrame, "3.1æ±‰åŒ–ç‰ˆ è„šæœ¬å…¬å‘Š", UDim2.new(1, 0, 0, 40), UDim2.new(0, 0, 0, 15))
    titleLabel.TextSize = 22 * 0.5  -- ä»…å…¬å‘Šæ ‡é¢˜ç¼©å°
    titleLabel.TextColor3 = Color3.fromRGB(255, 210, 0)
    titleLabel.TextXAlignment = Enum.TextXAlignment.Center
    
    -- åˆ›å»ºæ»šåŠ¨æ¡†æ¶
    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Name = "AnnouncementScroll"
    scrollFrame.Size = UDim2.new(1, -20, 0, 180)
    scrollFrame.Position = UDim2.new(0, 10, 0, 60)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.ScrollBarThickness = 8
    scrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
    scrollFrame.Parent = noticeFrame
    
    -- å†…å®¹æ ‡ç­¾ï¼ˆæ”¾åœ¨æ»šåŠ¨æ¡†æ¶å†…ï¼‰
    local contentLabel = createLabel(scrollFrame, "æ›´æ–°æ—¥å¿—:\n8æœˆ21æ—¥05:35æ›´æ–°å†›äº‹å¤§äº¨å»é™¤GBå¤±æ•ˆè„šæœ¬å…¨è‡ªåŠ¨å†œåœºè„šæœ¬æŒ‚æœºå³å¯\n8æœˆ21æ—¥10:07æ›´æ–°å¢¨æ°´æ¸¸æˆæ–°ç‰ˆè€å¤–XaåŒ…æ‹¬ä½¿ç”¨æ•™ç¨‹è·å–æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹\n8æœˆ21æ—¥00:58æ›´æ–°WARMIX[PVP FPS æ­¦å™¨æˆ˜æ–—å°„å‡»æª]-ä¿æŠ¤æˆ¿å±‹å…å—æ€ªç‰©ä¾µå®³-ä¿æŠ¤æ€»ç»Ÿ\n8æœˆ22æ—¥18:17æ·»åŠ äº†chainæœåŠ¡å™¨è„šæœ¬\n9æœˆ12æ—¥æ›´æ–°å¢¨æ°´æ¸¸æˆæ±‰åŒ–è„šç›®å‰ä½œè€…å·²å­¦ä¼šæ±‰åŒ–é€æ¸æ±‰åŒ–ä¸­\n9æœˆ13æ—¥10:00æ›´æ–°æ–°çš„å¢¨æ°´æ¸¸æˆæ±‰åŒ–å»é™¤å¢¨æ°´æ¸¸æˆè¿‡æœŸè„šæœ¬å»é™¤ink-gameæ­£å¸¸ç‰ˆæ·»åŠ ink-gameæµ‹è¯•ç‰ˆæ±‰åŒ–\n9æœˆ13æ—¥16:12å…¨é¢å–æ¶ˆæ±‰åŒ–æ›´æ–°æ–°çš„æ–¹æ³•ç­‰å¾…åŠå¤©æ–°æ›´æ–°äº†Xaé“¾æ¥ä¿®å¤è¿‡æœŸ\n9æœˆ13æ—¥23:08æ›´æ–°ä¸€é”®æ±‰åŒ–è„šæœ¬æ‰“å¼€è„šæœ¬ç‚¹å‡»æŒ‰é’®å°†è¿›è¡Œæ±‰åŒ–ç›®å‰åªæ”¯æŒå¢¨æ°´æ¸¸æˆaxæˆ–ink-gameå’ŒRINGTAä¸€é”®æ±‰åŒ–è„šæœ¬åœ¨å¢¨æ°´æ¸¸æˆèœå•(ç¦æ­¢æ‹¿å»åœˆğŸ’°å°¤å…¶æ˜¯çŸ¥é“æºç åœ°å€çš„äºº)\n9æœˆ14æ—¥12:23æ·»åŠ äº†æœ€å¼ºæˆ˜åœºæ±‰åŒ–è¿˜æ˜¯åœ¨ä¸€é”®æ±‰åŒ–è„šæœ¬é‡Œé¢ï¼Œè¿˜æ˜¯åœ¨å¢¨æ°´èœå•", 
        UDim2.new(1, -10, 0, 0), UDim2.new(0, 5, 0, 5))
    contentLabel.TextSize = 16 * 0.5  -- ä»…å…¬å‘Šå†…å®¹ç¼©å°
    contentLabel.TextWrapped = true
    contentLabel.TextXAlignment = Enum.TextXAlignment.Left
    contentLabel.AutomaticSize = Enum.AutomaticSize.Y
    
    -- è®¾ç½®æ»šåŠ¨æ¡†æ¶çš„CanvasSize
    contentLabel:GetPropertyChangedSignal("TextBounds"):Connect(function()
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, contentLabel.TextBounds.Y + 10)
    end)
    
    -- å…³é—­æŒ‰é’®
    local noticeDone = false
    createButton(noticeFrame, "æˆ‘çŸ¥é“äº†", UDim2.new(0.5, 0, 0, 40), UDim2.new(0.25, 0, 1, -50), function()
        noticeDone = true
        noticeGui:Destroy()
    end)
    
    while not noticeDone do task.wait() end
end
-- ================ æ‰§è¡Œæµç¨‹ï¼ˆå·²å»é™¤éªŒè¯ï¼‰ ================
-- å¼ºåˆ¶è·³è¿‡æ‰€æœ‰éªŒè¯ï¼Œç›´æ¥åˆ›å»ºæ–‡ä»¶å¤¹+æ˜¾ç¤ºå…¬å‘Š
createTargetFolder()  -- ç›´æ¥åˆ›å»ºéªŒè¯æ–‡ä»¶å¤¹ï¼ˆé¿å…åç»­è§¦å‘éªŒè¯ï¼‰
showAnnouncement()  -- æ˜¾ç¤ºå…¬å‘Šåè¿›å…¥ä¸»åŠŸèƒ½

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local SoundService = game:GetService("SoundService")
local HttpService = game:GetService("HttpService") -- æ–°å¢HTTPæœåŠ¡å¼•ç”¨
-- ====================== é…ç½®ä¸çŠ¶æ€ç®¡ç† ======================
local CONFIG = {
    TWEEN_DURATION = 0.25,       -- åŠ¨ç”»æ—¶é•¿
    UPDATE_INTERVAL = 0.5,       -- ç©å®¶åˆ—è¡¨æ›´æ–°é—´éš”
    UI_SCALE = { default = 0.8 },-- é»˜è®¤ç¼©æ”¾æ¯”ä¾‹
    UI_COLORS = {                -- ä¸»é¢˜è‰²
        primary = Color3.fromRGB(60, 60, 100),
        secondary = Color3.fromRGB(50, 50, 70),
        accent = Color3.fromRGB(255, 230, 100),
        success = Color3.fromRGB(60, 100, 80),
        danger = Color3.fromRGB(150, 50, 50),
        localPlayer = Color3.fromRGB(100, 200, 255)
    },
    NOTIFICATION = {             -- é€šçŸ¥é…ç½®
        DURATION = 3,            -- æ˜¾ç¤ºæ—¶é•¿ï¼ˆç§’ï¼‰
        SOUND_ID = "rbxassetid://79348298352567", -- å®å’šéŸ³æ•ˆ
        CORNER_RADIUS = 12       -- é€šçŸ¥æ¡†åœ†è§’
    }
}
local UI_STATE = {
    scale = CONFIG.UI_SCALE.default,  -- å½“å‰UIç¼©æ”¾æ¯”ä¾‹
    activeMenu = "ä¿å­˜ä½ç½®",          -- åˆå§‹æ¿€æ´»èœå•ï¼ˆé¢æ¿æ ‡è¯†ï¼Œä¸å¯ä¿®æ”¹ï¼‰
    menuPanels = {},                  -- èœå•é¢æ¿ç¼“å­˜ï¼ˆé”®ï¼šé¢æ¿æ ‡è¯†ï¼Œå€¼ï¼šé¢æ¿å®ä¾‹ï¼‰
    isRunning = true,                 -- è„šæœ¬è¿è¡ŒçŠ¶æ€
    isScaling = false,                -- ç¼©æ”¾ä¸­æ ‡è®°
    mainPanel = nil,                  -- ä¸»é¢æ¿å¼•ç”¨
    floatBtn = nil,                   -- æ‚¬æµ®çª—æŒ‰é’®
    topBar = nil,                     -- é¡¶éƒ¨æ å¼•ç”¨
    isDragging = false,               -- æ‹–åŠ¨ä¸­æ ‡è®°
    isScrolling = false,              -- æ»šåŠ¨ä¸­æ ‡è®°
    dragStart = Vector2.new(0, 0),    -- æ‹–åŠ¨èµ·å§‹ä½ç½®
    panelStartPos = UDim2.new(0, 0, 0, 0), -- é¢æ¿åˆå§‹ä½ç½®
    scrollStartPositions = {},        -- æ»šåŠ¨èµ·å§‹ä½ç½®ç¼“å­˜
    savedCoordinates = {},            -- å·²ä¿å­˜åæ ‡
    csvFilePath = "",                 -- CSVæ–‡ä»¶è·¯å¾„
    coordinateLoop = nil,             -- åæ ‡æ›´æ–°å¾ªç¯
    playerPositionLoop = nil,         -- ç©å®¶ä½ç½®æ›´æ–°å¾ªç¯
    playerSortMode = "name",          -- ç©å®¶æ’åºæ¨¡å¼ï¼ˆname/distanceï¼‰
    isToggleFeatureEnabled = false,   -- ç©¿å¢™åŠŸèƒ½å¼€å…³çŠ¶æ€ï¼ˆé»˜è®¤å…³é—­ï¼‰
    wallhackConnection = nil,          -- å­˜å‚¨è§’è‰²éƒ¨ä»¶ç›‘å¬è¿æ¥
    characterAddedConn = nil,
    characterRemovingConn = nil
}
-- ====================== å·¥å…·å‡½æ•° ======================
-- åˆ›å»ºåœ†è§’ï¼ˆé€‚é…ç¼©æ”¾ï¼‰
local function createCorner(parent, radius)
    if not parent or not parent:IsDescendantOf(game) then return end
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius * UI_STATE.scale)
    corner.Parent = parent
end
-- åˆ›å»ºæ–‡æœ¬æ ‡ç­¾ï¼ˆé€‚é…ç¼©æ”¾ï¼‰
local function createLabel(parent, props)
    if not parent or not parent:IsDescendantOf(game) then return nil end
    local label = Instance.new("TextLabel")
    label.Name = props.name or "Label"
    label.Size = props.size or UDim2.new(1, 0, 1, 0)
    label.Position = props.position or UDim2.new(0, 0, 0, 0)
    label.Text = props.text or ""
    label.TextColor3 = props.color or Color3.new(1, 1, 1)
    label.TextSize = (props.textSize or 14) * UI_STATE.scale
    label.TextXAlignment = props.xAlign or Enum.TextXAlignment.Left
    label.BackgroundTransparency = props.bgTransparency or 1
    label.BackgroundColor3 = props.bgColor or Color3.new(0, 0, 0)
    label.Font = props.font or Enum.Font.SourceSans
    label.Parent = parent
    label.Active = props.active or false
    if props.anchor then
        label.AnchorPoint = props.anchor
    end
    return label
end
-- åˆ›å»ºæŒ‰é’®ï¼ˆé€‚é…ç¼©æ”¾ + æ‚¬åœåŠ¨ç”»ï¼‰
local function createButton(parent, props)
    if not parent or not parent:IsDescendantOf(game) then return nil end
    local btn = Instance.new("TextButton")
    btn.Name
